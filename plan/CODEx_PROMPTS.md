# MEGRIBI / 繧√＄繧顔・ 窶・Codex Master Prompts・域ｭ｣蠑冗沿・・
Last updated: 2025-12-16  
commit: cf6d7b5

---

## 縺薙・繝峨く繝･繝｡繝ｳ繝医・菴咲ｽｮ縺･縺・
縺薙・ `plan/CODEx_PROMPTS.md` 縺ｯ縲・ 
**MEGRIBI・医ａ縺舌ｊ轣ｯ・峨・繝ｭ繧ｸ繧ｧ繧ｯ繝医↓縺翫￠繧・Codex / ChatGPT 逕ｨ縺ｮ蜚ｯ荳縺ｮ豁｣譛ｬ・・ingle source of truth・・* 縺ｧ縺吶・
莉雁ｾ後√メ繝｣繝・ヨ蜀帝ｭ縺ｫ豈主屓髟ｷ譁・・縲後・繧ｹ繧ｿ繝ｼ繝励Ο繝ｳ繝励ヨ縲阪ｒ雋ｼ繧句ｿ・ｦ√・縺ゅｊ縺ｾ縺帙ｓ縲・ 
Codex 縺ｫ縺ｯ **縲後％縺ｮ繝輔ぃ繧､繝ｫ繧貞ｿ・★隱ｭ繧√・* 縺ｨ謖・､ｺ縺吶ｋ縺縺代〒蜊∝・縺ｧ縺吶・
---

## 繝励Ο繧ｸ繧ｧ繧ｯ繝亥・騾壼燕謠・
- 蟇ｾ雎｡繝ｪ繝昴ず繝医Μ: `riental-lounge-monitor-main/`
- 縺薙・繝√Ε繝・ヨ縺ｧ縺ｯ **譛ｬ繝ｪ繝昴ず繝医Μ縺ｮ髢狗匱縺ｮ縺ｿ** 繧呈桶縺・- 繝・・繧ｿ繧ｽ繝ｼ繧ｹ縺ｮ source of truth 縺ｯ **Supabase `logs` 繝・・繝悶Ν**
  - Google Sheet / GAS 縺ｯ繝ｬ繧ｬ繧ｷ繝ｼ fallback
  - 讖溯・諡｡蠑ｵ縺ｯ遖∵ｭ｢
- 繝輔Ο繝ｳ繝医お繝ｳ繝・  - Next.js 16・・pp Router・・  - TypeScript / Tailwind CSS
  - 譌｢蟄倥Ν繝ｼ繝・ぅ繝ｳ繧ｰ繧貞｣翫＆縺ｪ縺・％縺ｨ  
    `/`, `/stores`, `/store/[id]`, `src/app/api/*/route.ts`

---

## 驥崎ｦ√↑險ｭ險亥宛邏・ｼ育ｵｶ蟇ｾ驕ｵ螳茨ｼ・
### /api/range 縺ｮ蛻ｶ邏・- 蜿励￠莉倥￠繧九け繧ｨ繝ｪ縺ｯ **store / limit 縺ｮ縺ｿ**
- Supabase 縺ｧ縺ｯ `ts.desc` 縺ｧ蜿門ｾ励＠縲・*繝ｬ繧ｹ繝昴Φ繧ｹ縺ｯ ts.asc 縺ｫ荳ｦ縺ｹ譖ｿ縺医ｋ**
- from / to 縺ｪ縺ｩ縺ｮ譎る俣繝輔ぅ繝ｫ繧ｿ繧・**霑ｽ蜉縺励※縺ｯ縺・￠縺ｪ縺・*
- 19:00窶・5:00 縺ｮ night window 蛻､螳壹・ **繝輔Ο繝ｳ繝医お繝ｳ繝芽ｲｬ蜍・*
  - `useStorePreviewData.ts`
  - 繝舌ャ繧ｯ繧ｨ繝ｳ繝峨↓蜷梧ｧ倥・繝ｭ繧ｸ繝・け繧貞・繧後↑縺・
### 譌｢蟄・API 莠呈鋤諤ｧ
- `/health`
- `/api/meta`
- `/api/current`
- `/api/range`
- `/api/forecast_*`
- `/tasks/tick`

縺薙ｌ繧峨・謖吝虚繧・**螢翫＠縺ｦ縺ｯ縺・￠縺ｪ縺・*縲・
### Second Venues
- map-link 譁ｹ蠑上′豁｣
- Google Places API 縺ｫ繧医ｋ隧ｳ邏ｰ蜿朱寔縺ｯ蜴溷援陦後ｏ縺ｪ縺・- `/api/second_venues` 縺ｯ陬懷勧諠・ｱ縺ｧ縺ゅｊ繧ｳ繧｢縺ｧ縺ｯ縺ｪ縺・
---

## 讖溷ｯ・ュ蝣ｱ縺ｮ謇ｱ縺・
- Supabase URL / KEY
- Render 迺ｰ蠅・､画焚
- Google API Key

**縺吶∋縺ｦ繝上・繝峨さ繝ｼ繝臥ｦ∵ｭ｢**  
蠢・★迺ｰ蠅・､画焚邨檎罰縺ｧ謇ｱ縺・％縺ｨ縲・
---

## 蜃ｺ蜉帙・菴懈･ｭ繝ｫ繝ｼ繝ｫ

### patch(diff) 繝ｫ繝ｼ繝ｫ
- 螟画峩縺ｯ蠢・★ patch(diff) 蠖｢蠑上〒謠千､ｺ
- 蠎・ｯ・峇繝ｻ遐ｴ螢顔噪螟画峩縺ｯ莠句燕隱ｬ譏弱↑縺励↓陦後ｏ縺ｪ縺・
### PowerShell 繝ｫ繝ｼ繝ｫ
- 螳溯｡後さ繝槭Φ繝峨・ **蠢・★ 1 縺､縺ｮ繧ｳ繝ｼ繝峨ヶ繝ｭ繝・け**
- `cd` 繝代せ縺ｯ螳溘ョ繧｣繝ｬ繧ｯ繝医Μ讒区・縺ｫ豁｣遒ｺ縺ｫ蜷医ｏ縺帙ｋ

---

## 繝阪ャ繝医Ρ繝ｼ繧ｯ / DNS 豕ｨ諢丈ｺ矩・
莉･荳九・繧ｨ繝ｩ繝ｼ縺悟・縺溷ｴ蜷茨ｼ・
- Temporary failure in name resolution
- getaddrinfo ENOTFOUND

**繧ｳ繝ｼ繝峨ｄ URL 繧貞､画峩縺励※逶ｴ縺昴≧縺ｨ縺励↑縺・％縺ｨ縲・*

縺ｾ縺夲ｼ・- 繝ｭ繝ｼ繧ｫ繝ｫ PC 縺ｮ DNS 蝠城｡後・蜿ｯ閭ｽ諤ｧ繧定ｪｬ譏・- Render 譛ｬ逡ｪ迺ｰ蠅・〒縺ｮ蜀咲樟遒ｺ隱・- Render Logs 縺ｮ遒ｺ隱・
繧呈署譯医☆繧九％縺ｨ縲・
---

## 繝｢繝ｼ繝牙愛螳夲ｼ亥ｿ・茨ｼ・
繝ｦ繝ｼ繧ｶ繝ｼ蜈･蜉帙ｒ莉･荳九・縺・★繧後°縺ｫ蛻・｡槭☆繧九・
- [ONBOARDING]
- [BUGFIX]
- [FEATURE]
- [REFACTOR]
- [DOC]
- [EXPLAIN]

譛蛻昴↓ **蛻､螳壹＠縺溘Δ繝ｼ繝・+ 隕∫ｴ・+ 髢｢騾｣繝輔ぃ繧､繝ｫ蜷・* 繧呈署遉ｺ縺吶ｋ縲・
---

## 繝｢繝ｼ繝牙挨繝輔Ο繝ｼ讎りｦ・
### [ONBOARDING]
- 迴ｾ迥ｶ謨ｴ逅・・譁ｹ驥晉｢ｺ隱阪・縺ｿ
- diff 縺ｯ蜃ｺ縺輔↑縺・- 隱ｭ繧縺ｹ縺阪ヵ繧｡繧､繝ｫ繝ｻ豕ｨ諢冗せ繧貞・謖・
### [BUGFIX]
- 繝ｭ繧ｰ繝ｻ繝・せ繝医°繧牙次蝗蛟呵｣懊ｒ蛻玲嫌
- 菫ｮ豁｣譁ｹ驥・竊・譛蟆・diff
- 螳溯｡後さ繝槭Φ繝峨ｒ譛蠕後↓謠千､ｺ

### [FEATURE]
- 譌｢蟄倅ｻ墓ｧ倥→縺ｮ謨ｴ蜷域ｧ遒ｺ隱・- 險ｭ險医Γ繝｢ 竊・diff
- 蠢・ｦ√↑繝・せ繝医・requests.http 繧呈署譯・
### [REFACTOR]
- 逶ｮ逧・・遉ｺ
- API 莠呈鋤諤ｧ繝√ぉ繝・け
- 蟆上＆縺ｪ繧ｹ繝・ャ繝励〒 diff

### [DOC]
- 螳溯｣・→縺ｮ蟾ｮ蛻・欠鞫・- Last updated / commit 繧定ｿｽ險・
### [EXPLAIN]
- 隱ｭ縺ｿ隗｣縺阪・縺ｿ
- diff 縺ｯ蜃ｺ縺輔↑縺・
---

## 蜃ｺ蜉帙ヵ繧ｩ繝ｼ繝槭ャ繝茨ｼ亥宍螳茨ｼ・
1. 繝｢繝ｼ繝牙愛螳・+ 隕∫ｴ・ 
2. 譁ｹ驥昴・險ｭ險・ 
3. patch(diff)・亥ｿ・ｦ√↑蝣ｴ蜷医・縺ｿ・・ 
4. 螳溯｡後さ繝槭Φ繝我ｸ隕ｧ

---

## 陬懆ｶｳ驕狗畑繝ｫ繝ｼ繝ｫ

- 繝ｦ繝ｼ繧ｶ繝ｼ縺ｯ遏ｭ譁・・繝ｭ繧ｰ譁ｭ迚・・縺ｿ騾√ｋ縺薙→縺悟､壹＞
- 繝｢繝ｼ繝画悴謖・ｮ壽凾縺ｯ蜀・ｮｹ縺九ｉ謗ｨ貂ｬ縺吶ｋ
- 螟ｧ隕乗ｨ｡螟画峩縺ｯ **險ｭ險・竊・遒ｺ隱・竊・diff**

---

莉･荳翫・

